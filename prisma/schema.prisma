generator client {
  provider = "prisma-client-js"
  previewFeatures = ["postgresqlExtensions"]
}

datasource db {
  provider = "postgresql"
  extensions = [vector]
}

model Article {
  id           String   @id @default(uuid())
  title        String
  content      String
  source       String?
  url          String   @unique
  publishedAt  DateTime?
  embedding    Unsupported("vector(1536)")
  createdAt    DateTime @default(now())
}

model Summary {
  id           String   @id @default(uuid())
  originalText String
  summary      String
  createdAt    DateTime @default(now())
}

model StoryRanking {
  id           String   @id @default(uuid())
  articles     Json
  interests    Json
  rankedResult Json
  createdAt    DateTime @default(now())
}


model User {
  id        String   @id @default(uuid())
  email     String   @unique
  createdAt DateTime @default(now())

  preferences Preference[]
  broadcasts  Broadcast[]
}

model Preference {
  id        String   @id @default(uuid())
  userId    String
  interests Json
  updatedAt DateTime @default(now())

  user User @relation(fields: [userId], references: [id])
}

model Broadcast {
  id        String   @id @default(uuid())
  userId    String
  script    String
  audioUrl  String?
  createdAt DateTime @default(now())

  user User @relation(fields: [userId], references: [id])
}
